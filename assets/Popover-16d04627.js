import{r as l,u as W,b as q,w as re,c as A,j as e,m as J,l as B,B as V,I as ie,J as ce,a as de,e as ue,G as fe,f as ve,ac as ge,Q as he,ad as _e,P as me,k as ye,L as be,ab as xe}from"./index-ca0623a3.js";const M={popover:"^popover","popover--top":"^popover--top","popover--top-left":"^popover--top-left","popover--top-right":"^popover--top-right","popover--right":"^popover--right","popover--right-top":"^popover--right-top","popover--right-bottom":"^popover--right-bottom","popover--bottom":"^popover--bottom","popover--bottom-left":"^popover--bottom-left","popover--bottom-right":"^popover--bottom-right","popover--left":"^popover--left","popover--left-top":"^popover--left-top","popover--left-bottom":"^popover--left-bottom",popover__mask:"^popover__mask",popover__content:"^popover__content",popover__arrow:"^popover__arrow",popover__header:"^popover__header","popover__header-title":"^popover__header-title","popover__header-actions":"^popover__header-actions",popover__body:"^popover__body",popover__footer:"^popover__footer","popover__footer--left":"^popover__footer--left","popover__footer--center":"^popover__footer--center","popover__footer--right":"^popover__footer--right"},U={enter:86,leave:100},Q=l.createContext(void 0);function Pe(k){const{styleOverrides:S,styleProvider:c,align:w="right",actions:_=["cancel","ok"],cancelProps:a,okProps:s,onCancelClick:d,onOkClick:u,...m}=W("PopoverFooter",k),n=q(M,{popover:c==null?void 0:c.popover},S),{t:y}=re(),t=l.use(Q),[g,p]=A(!1,a==null?void 0:a.loading),[b,L]=A(!1,s==null?void 0:s.loading),h={...a,loading:g,onClick:()=>{const o=d==null?void 0:d();o instanceof Promise?(p(!0),o.then(x=>{p(!1),x!==!1&&(t==null||t.onClose())})):o!==!1&&(t==null||t.onClose())}},R={...s,loading:b,onClick:()=>{const o=u==null?void 0:u();o instanceof Promise?(L(!0),o.then(x=>{L(!1),x!==!1&&(t==null||t.onClose())})):o!==!1&&(t==null||t.onClose())}};return e.jsx("div",{...m,...J(n("popover__footer",`popover__footer--${w}`),{className:m.className,style:m.style}),children:_.map((o,x)=>{const{id:O,action:C}=B.has(o,["id","action"])?o:{id:x,action:o};return e.jsx(l.Fragment,{children:C==="cancel"?e.jsx(V,{...h,pattern:h.pattern??"secondary",children:h.children??y("Footer","Cancel")}):C==="ok"?e.jsx(V,{...R,children:R.children??y("Footer","OK")}):C},O)})})}function te(k){const{styleOverrides:S,styleProvider:c,children:w,actions:_=[],closeProps:a,onCloseClick:s,...d}=W("PopoverHeader",k),u=q(M,{popover:c==null?void 0:c.popover},S),{t:m}=re(),n=l.use(Q),[y,t]=A(!1,a==null?void 0:a.loading),g={...a,loading:y,onClick:()=>{const p=s==null?void 0:s();p instanceof Promise?(t(!0),p.then(b=>{t(!1),b!==!1&&(n==null||n.onClose())})):p!==!1&&(n==null||n.onClose())}};return e.jsxs("div",{...d,...J(u("popover__header"),{className:d.className,style:d.style}),children:[e.jsx("div",{...u("popover__header-title"),id:n==null?void 0:n.id,children:w}),e.jsx("div",{...u("popover__header-actions"),children:_.map((p,b)=>{const{id:L,action:h}=B.has(p,["id","action"])?p:{id:b,action:p};return e.jsx(l.Fragment,{children:h==="close"?e.jsx(V,{...g,"aria-label":g["aria-label"]??m("Close"),pattern:g.pattern??"text",icon:g.icon??e.jsx(ie,{children:e.jsx(ce,{})})}):h},L)})})]})}const se=k=>{const{ref:S,children:c,styleOverrides:w,styleProvider:_,content:a,header:s,footer:d,visible:u,defaultVisible:m,trigger:n="hover",placement:y="top",placementFixed:t=!1,arrow:g=!0,escClosable:p=!0,gap:b=10,inWindow:L=!1,mouseEnterDelay:h=150,mouseLeaveDelay:R=200,modal:o=!1,skipFirstTransition:x=!0,destroyAfterClose:O=!1,lazyLoading:C=!0,zIndex:Z,onVisibleChange:ne,afterVisibleChange:$,...P}=W("Popover",k),pe=o?"click":n,f=de(),F=q(M,{popover:_==null?void 0:_.popover},w),T=l.useId(),X=`${f}-popover-trigger-${T}`,Y=`${f}-popover-title-${T}`,ee=`${f}-popover-content-${T}`,H=ue(()=>document.getElementById(X)),j=l.useRef(null),v=l.useRef(null),K=l.useRef(null),[I,N]=A(m??!1,u,ne),ae=fe(I),le=B.isUndefined(Z)?`calc(var(--${f}-zindex-fixed) + ${ae})`:Z,z=l.useRef(y),D=ve(()=>{if(I&&H.current&&j.current&&v.current){const E=ge(H.current,{width:v.current.offsetWidth,height:v.current.offsetHeight},{placement:y,placementFallback:z.current,placementFixed:t,gap:b,inWindow:L});j.current.classList.toggle(`${f}-popover--${z.current}`,!1),z.current=E.placement,j.current.classList.toggle(`${f}-popover--${z.current}`,!0),v.current.style.setProperty("--popup-transform-origin",E.transformOrigin),v.current.style.top=E.top+"px",v.current.style.left=E.left+"px"}});return he(o&&I),l.useImperativeHandle(S,()=>({updatePosition:D}),[D]),e.jsx(_e,{visible:I,trigger:pe,mouseEnterDelay:h,mouseLeaveDelay:R,updatePosition:{fn:D,triggerRef:H,popupRef:v},onVisibleChange:N,children:E=>e.jsxs(e.Fragment,{children:[c({id:X,...E.trigger,onKeyDown:r=>{I&&p&&r.code==="Escape"&&(r.stopPropagation(),r.preventDefault(),N(!1))}}),e.jsx(me,{selector:()=>{let r=document.getElementById(`${f}-popover-root`);return r||(r=document.createElement("div"),r.id=`${f}-popover-root`,document.body.appendChild(r)),r},children:e.jsx(ye,{enter:I,name:`${f}-popup`,duration:U,skipFirstTransition:x,onSkipEnter:D,onBeforeEnter:r=>{D(),r&&r.style.setProperty("--popup-duration",U.enter+"ms")},onAfterEnter:()=>{$==null||$(!0),o&&(K.current=document.activeElement,j.current&&j.current.focus({preventScroll:!0}))},onBeforeLeave:r=>{r&&r.style.setProperty("--popup-duration",U.leave+"ms")},onAfterLeave:()=>{$==null||$(!1),o&&K.current&&K.current.focus({preventScroll:!0})},children:(r,G)=>e.jsx(be,{hidden:G,disabled:!C,children:G&&O?null:e.jsx(Q,{value:{id:Y,onClose:()=>{N(!1)}},children:e.jsxs("div",{...P,...J(F("popover"),{className:P.className,style:{...P.style,"--popup-scale":.3,zIndex:le,...G?{display:"none"}:void 0}}),ref:i=>(j.current=i,()=>{j.current=null}),tabIndex:-1,role:P.role??o?"alertdialog":"dialog","aria-modal":o,"aria-labelledby":s?Y:void 0,"aria-describedby":ee,onKeyDown:i=>{var oe;(oe=P.onKeyDown)==null||oe.call(P,i),I&&p&&i.code==="Escape"&&(i.stopPropagation(),i.preventDefault(),N(!1)),o&&xe(i)},children:[o&&e.jsx("div",{...F("popover__mask"),onClick:()=>{N(!1)}}),e.jsxs("div",{...F("popover__content"),ref:i=>(v.current=i,r(i),()=>{v.current=null,r(null)}),...E.popup,children:[g&&e.jsx("div",{...F("popover__arrow")}),B.isString(s)?e.jsx(te,{children:s}):s,e.jsx("div",{...F("popover__body"),id:ee,children:a}),d]})]})})})})})]})})};se.Header=te;se.Footer=Pe;export{se as P};
