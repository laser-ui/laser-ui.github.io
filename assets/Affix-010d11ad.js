import{r as s,u as q,a as A,d as P,e as T,f as g,l as a,g as U,h as $,i as E,k as v,j as k}from"./index-b980bcda.js";import{u as B,g as z}from"./getOffsetToRoot-6e75474e.js";import{t as F}from"./toPx-59a31e07.js";const J=s.forwardRef((I,b)=>{const{children:f,top:d=0,target:c,zIndex:w}=q("Affix",I),C=A(),n=P(),{pageScrollRef:x,contentResizeRef:L}=T(),l=s.useId(),o=g(()=>document.querySelector(`[data-l-affix="${l}"]`)),i=g(()=>document.querySelector(`[data-l-affix-placeholder="${l}"]`)),r=g(a.isUndefined(c)?()=>x.current:c),[u,j]=s.useState(!1),e=U(()=>{if(o.current&&i.current&&r.current){const t=u?i.current:o.current,p=t.getBoundingClientRect(),R=z(r.current),y=a.isString(d)?F(d,!0):d,S=Math.ceil(r.current.scrollTop)+y>=z(t)-R;j(S),n.classes.position&&o.current.classList.toggle(n.classes.position,!1),S?(n.replaceRule("position",{width:p.width,height:p.height,position:"fixed",top:(a.isUndefined(c)?R:r.current.getBoundingClientRect().top)+y,left:p.left,zIndex:w??`var(--${C}-zindex-sticky)`}),o.current.classList.toggle(n.classes.position,!0),i.current.style.display=""):(n.deleteRule("position"),i.current.style.display="none")}});B(()=>{e()});const h=$(e);E(x,"scroll",e,{passive:!0},h),E(r,"scroll",e,{passive:!0},h||a.isUndefined(c)),v(u?i:o,e),v(L,e),s.useImperativeHandle(b,()=>({sticky:u,updatePosition:e}),[u,e]);const m=t=>k.jsxs(k.Fragment,{children:[s.cloneElement(t,{style:{...t.props.style,visibility:"hidden"},"aria-hidden":!0,"data-l-affix-placeholder":l}),s.cloneElement(t,{"data-l-affix":l})]});return a.isFunction(f)?f(m):m(f)});export{J as A};
