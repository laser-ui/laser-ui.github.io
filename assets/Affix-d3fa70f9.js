import{r as s,u as w,a as A,d as L,e as u,l as r,f as T,g as U,h as $,i as R,k as S,j as E}from"./index-e8505753.js";import{g as v}from"./getOffsetToRoot-22965f61.js";import{t as B}from"./toPx-86aeeee0.js";const M=s.forwardRef((I,k)=>{const{children:c,top:f=0,target:i,zIndex:z}=w("Affix",I),b=A(),{pageScrollRef:d,contentResizeRef:C}=L(),a=s.useId(),p=u(()=>document.querySelector(`[data-l-affix="${a}"]`)),x=u(()=>document.querySelector(`[data-l-affix-reference="${a}"]`)),o=u(r.isUndefined(i)?()=>d.current:i),[n,P]=s.useState(!1),[j,q]=s.useState(),t=T(()=>{const e=n?x.current:p.current;if(o.current&&e){const l=e.getBoundingClientRect(),y=v(o.current),h=r.isString(f)?B(f,!0):f;P(Math.ceil(o.current.scrollTop)+h>=v(e)-y),q({width:l.width,height:l.height,top:(r.isUndefined(i)?y:o.current.getBoundingClientRect().top)+h,left:l.left})}});U(()=>{t()},[]);const g=$(t);R(d,"scroll",t,{passive:!0},g),R(o,"scroll",t,{passive:!0},g||r.isUndefined(i)),S(n?x:p,t),S(C,t),s.useImperativeHandle(k,()=>({sticky:n,updatePosition:t}),[n,t]);const m=e=>E.jsxs(E.Fragment,{children:[n&&s.cloneElement(e,{style:{...e.props.style,visibility:"hidden"},"aria-hidden":!0,"data-l-affix-reference":a}),s.cloneElement(e,{style:n?{...e.props.style,...j,position:"fixed",zIndex:z??`var(--${b}-zindex-sticky)`}:e.props.style,"data-l-affix":a})]});return r.isFunction(c)?c(m):m(c)});export{M as A};
