import{r as n,u as q,a as A,d as L,e as P,f as g,l,g as T,h as $,i as y,j as S}from"./index-ebf6c559.js";import{u as b,g as E}from"./getOffsetToRoot-d7b300ae.js";import{t as B}from"./toPx-292fb10d.js";const H=n.forwardRef((k,z)=>{const{children:u,top:f=0,target:d,zIndex:C}=q("Affix",k),I=A(),o=L(),{pageScrollRef:v,contentResizeRef:w}=P(),r=n.useId(),e=g(()=>document.querySelector(`[data-l-affix="${r}"]`)),i=g(()=>document.querySelector(`[data-l-affix-placeholder="${r}"]`)),a=g(l.isUndefined(d)?()=>v.current:d),[c,j]=n.useState(!1),t=T(()=>{if(e.current&&i.current&&a.current){const s=c?i.current:e.current,p=s.getBoundingClientRect(),h=E(a.current),m=l.isString(f)?B(f,!0):f,R=Math.ceil(a.current.scrollTop)+m>=E(s)-h;j(R),o.classes.position&&e.current.classList.toggle(o.classes.position,!1),R?(o.replaceRule("position",{width:p.width,height:p.height,position:"fixed",top:(l.isUndefined(d)?h:a.current.getBoundingClientRect().top)+m,left:p.left,zIndex:C??`var(--${I}-zindex-sticky)`}),e.current.classList.toggle(o.classes.position,!0),i.current.style.display=""):(o.deleteRule("position"),i.current.style.display="none")}});b(()=>{t()}),$(e,t),y(c?i:e,t),y(w,t),n.useImperativeHandle(z,()=>({sticky:c,updatePosition:t}),[c,t]);const x=s=>S.jsxs(S.Fragment,{children:[n.cloneElement(s,{style:{...s.props.style,visibility:"hidden"},"aria-hidden":!0,"data-l-affix-placeholder":r}),n.cloneElement(s,{"data-l-affix":r})]});return l.isFunction(u)?u(x):x(u)});export{H as A};
