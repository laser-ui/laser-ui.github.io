import{r as w,u as U,b as F,d as M,c as $,x as A,l as s,L as P,j as u,m as k}from"./index-551d17bd.js";import{u as D}from"./useForkRef-a68dff22.js";const J={textarea:"^textarea","textarea--small":"^textarea--small","textarea--medium":"^textarea--medium","textarea--large":"^textarea--large",textarea__count:"^textarea__count"},q=w.forwardRef((b,R)=>{const{styleOverrides:T,styleProvider:d,formControl:a,model:S,defaultModel:y,autoRows:r=!1,resizable:z=!0,showCount:x=!1,size:H,onModelChange:L,...t}=U("Textarea",b),v=F(J,{textarea:d==null?void 0:d.textarea},T),l=M(),e=w.useRef(null),_=D(e,R),[i,j]=$(y??"",S,L,void 0,a==null?void 0:a.control),{size:C,disabled:E}=A({size:H,disabled:t.disabled||(a==null?void 0:a.control.disabled)});w.useEffect(()=>{if(e.current){const n=e.current.style.cssText;e.current.value="",e.current.rows=1,e.current.style.cssText=n+"box-sizing:content-box;overflow:hidden;height:0px;min-height:unset;";const o=e.current.offsetHeight;e.current.style.cssText=n+"overflow:hidden;height:0px;min-height:unset;padding:0px;";const c=e.current.scrollHeight;e.current.value=i;const p=Math.round(e.current.scrollHeight/c);s.isNumber(t.rows)?e.current.rows=t.rows:e.current.removeAttribute("rows"),e.current.style.cssText=n;let h,g,f,m;r!==!1&&(h=p*c,g="hidden",r!==!0&&(s.isNumber(r.minRows)&&(f=r.minRows*c),s.isNumber(r.maxRows)&&(m=r.maxRows*c,r.maxRows<p&&(g=void 0)))),l.classes.rows&&e.current.classList.toggle(l.classes.rows,!1),l.replaceRule("rows",{height:s.isUndefined(h)?void 0:h+o,overflow:s.isUndefined(g)?void 0:"hidden",minHeight:s.isUndefined(f)?void 0:f+o,maxHeight:s.isUndefined(m)?void 0:m+o}),e.current.classList.toggle(l.classes.rows,!0)}});const N=P({form:a});return u.jsxs(u.Fragment,{children:[u.jsx("textarea",{...t,...k(v("textarea",`textarea--${C}`),{className:t.className,style:{...t.style,resize:z&&r===!1?void 0:"none"}}),...N,ref:_,value:i,disabled:E,onChange:n=>{var o;(o=t.onChange)==null||o.call(t,n),j(n.currentTarget.value)}}),x!==!1&&u.jsx("div",{...v("textarea__count"),children:s.isFunction(x)?x(i.length):s.isUndefined(t.maxLength)?i.length:`${i.length} / ${t.maxLength}`})]})});export{q as T};
