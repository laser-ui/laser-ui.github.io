import{r as g,u as U,b as F,c as L,Q as M,l as s,a2 as $,j as c,m as A}from"./index-a3b6559e.js";import{u as P}from"./useForkRef-7b0e428d.js";const k={textarea:"^textarea","textarea--small":"^textarea--small","textarea--medium":"^textarea--medium","textarea--large":"^textarea--large",textarea__count:"^textarea__count"},Q=g.forwardRef((b,v)=>{const{styleOverrides:y,styleProvider:u,formControl:a,model:R,defaultModel:T,autoRows:r=!1,resizable:z=!0,showCount:d=!1,size:H,onModelChange:S,...t}=U("Textarea",b),p=F(k,{textarea:u==null?void 0:u.textarea},y),e=g.useRef(null),_=P(e,v),[o,j]=L(T??"",R,S,void 0,a==null?void 0:a.control),{size:C,disabled:E}=M({size:H,disabled:t.disabled||(a==null?void 0:a.control.disabled)});g.useEffect(()=>{if(e.current){const n=e.current.style.cssText;e.current.value="",e.current.rows=1,e.current.style.cssText=n+"box-sizing:content-box;overflow:hidden;height:0px;min-height:unset;";const i=e.current.offsetHeight;e.current.style.cssText=n+"overflow:hidden;height:0px;min-height:unset;padding:0px;";const l=e.current.scrollHeight;e.current.value=o;const w=Math.round(e.current.scrollHeight/l);s.isNumber(t.rows)?e.current.rows=t.rows:e.current.removeAttribute("rows"),e.current.style.cssText=n;let x,h,m,f;r!==!1&&(x=w*l,h="hidden",r!==!0&&(s.isNumber(r.minRows)&&(m=r.minRows*l),s.isNumber(r.maxRows)&&(f=r.maxRows*l,r.maxRows<w&&(h=void 0)))),e.current.style.height=s.isUndefined(x)?"":x+i+"px",e.current.style.overflow=s.isUndefined(h)?"":"hidden",e.current.style.minHeight=s.isUndefined(m)?"":m+i+"px",e.current.style.maxHeight=s.isUndefined(f)?"":f+i+"px"}});const N=$({form:a});return c.jsxs(c.Fragment,{children:[c.jsx("textarea",{...t,...A(p("textarea",`textarea--${C}`),{className:t.className,style:{...t.style,resize:z&&r===!1?void 0:"none"}}),...N,ref:_,value:o,disabled:E,onChange:n=>{var i;(i=t.onChange)==null||i.call(t,n),j(n.currentTarget.value)}}),d!==!1&&c.jsx("div",{...p("textarea__count"),children:s.isFunction(d)?d(o.length):s.isUndefined(t.maxLength)?o.length:`${o.length} / ${t.maxLength}`})]})});export{Q as T};
