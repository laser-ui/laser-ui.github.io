import{u as ge,b as me,r as g,e as _e,c as be,l as o,z as ve,g as pe,s as K,N as Me,j as S,m as j,y as xe}from"./index-a2c2c507.js";const Re={slider:"^slider","slider.is-disabled":"is-disabled","slider--horizontal":"^slider--horizontal","slider--vertical":"^slider--vertical",slider__track:"^slider__track","slider__track--reverse":"^slider__track--reverse",slider__thumb:"^slider__thumb","slider__thumb.is-focused":"is-focused","slider__thumb--draggable":"^slider__thumb--draggable",slider__mark:"^slider__mark","slider__mark--hidden":"^slider__mark--hidden","slider__mark-label":"^slider__mark-label","slider__mark-label.is-active":"is-active","slider__input-wrapper":"^slider__input-wrapper",slider__input:"^slider__input"};function Ye(ie){const{styleOverrides:ne,styleProvider:A,formControl:m,model:se,defaultModel:re,max:c=100,min:a=0,step:x=1,range:p=!1,rangeMinDistance:_,rangeThumbDraggable:Q=!1,tooltip:R,customTooltip:W,marks:X,vertical:h=!1,reverse:k=!1,disabled:oe=!1,inputProps:b,onModelChange:ce,...d}=ge("Slider",ie),Y=me(Re,{slider:A==null?void 0:A.slider},ne),D=g.useRef(null),E=g.useRef(null),T=g.useRef(null),B=g.useRef(null),C=g.useRef(null),V=_e(()=>window),[N,Z]=g.useState(null),[z,ue]=g.useState(null),[F,I]=g.useState(null),[r,U]=g.useState(null),[O,w]=be(re??(p?[0,0]:0),se,ce,(e,i)=>o.isNumber(e)&&o.isNumber(i)?e===i:o.isArray(e)&&o.isArray(i)?e[0]===i[0]&&e[1]===i[1]:!1,m==null?void 0:m.control),[v,M=0]=p?O:[O],[ae,de]=(()=>p?[(R==null?void 0:R[0])??(z==="left"?!0:!!(N==="left"||r)),(R==null?void 0:R[1])??(z==="right"?!0:!!(N==="right"||r))]:[R??(z==="left"?!0:!!(N==="left"||r)),!1])(),{disabled:P}=ve({disabled:oe||(m==null?void 0:m.control.disabled)}),$=(e,i="round")=>{let t=null;if(x){const l=Math[i](e/x);t=Math.min(c,Math.max(a,l*x))}if(o.isArray(X)){let l=t?Math.abs(t-e):1/0;if(l>0)for(const n of X){const s=o.isNumber(n)?n:n.value;if(i==="round"||i==="ceil"&&s-e>=0||i==="floor"&&s-e<=0){const u=Math.abs(s-e);u<l&&(l=u,t=s)}}}return t??a},q=(e,i)=>{if(i=i??N==="left",D.current){const t=D.current.getBoundingClientRect(),l=$((c-a)*(h?(k?e.clientY-t.top:t.bottom-e.clientY)/t.height:(k?t.right-e.clientX:e.clientX-t.left)/t.width));w(p?n=>{const s=i?0:1;if(n[s]!==l){const u=l-n[s],f=u>0;if(n[s]=l,o.isNumber(_)&&n[1]-n[0]<_){const y=i?1:0;n[y]=$(n[y]+u,f?"ceil":"floor"),n[1]-n[0]<_&&(n[s]=$(n[y]+(f?-_:_),f?"floor":"ceil"))}}}:l)}},L=e=>{if(x&&r&&D.current){const i=D.current.getBoundingClientRect(),t=Math.round((c-a)*(h?(k?e.clientY-r.clientY:r.clientY-e.clientY)/i.height:(k?r.clientX-e.clientX:e.clientX-r.clientX)/i.width)/x)*x,l=[0,0];let n=-1;for(const s of[r.left+t,r.right+t]){n+=1;const u=n===0?1:0;if(s<a){l[n]=a,l[u]=a+Math.abs(r.left-r.right);break}if(s>c){l[n]=c,l[u]=c-Math.abs(r.left-r.right);break}l[n]=s}w(l)}},ee=e=>{const i=(t=!0)=>{const l=t?E.current:T.current;l&&(q(e,t),I(t?"left":"right"),l.firstElementChild.focus({preventScroll:!0}))};if(p){if(E.current&&T.current){const t=E.current.getBoundingClientRect(),l=T.current.getBoundingClientRect(),n=Math.abs(h?t.bottom-t.height/2-e.clientY:e.clientX-(t.left+t.width/2)),s=Math.abs(h?l.bottom-l.height/2-e.clientY:e.clientX-(l.left+l.width/2));Q&&(h?e.clientY<Math.max(t.top,l.top):e.clientX>Math.min(t.right,l.right))&&(h?e.clientY>Math.min(t.bottom,l.bottom):e.clientX<Math.max(t.left,l.left))?U({left:v,right:M,clientX:e.clientX,clientY:e.clientY}):s<=n?i(!1):i(!0)}}else i(!0)};pe(()=>{var e,i,t,l;r?((e=B.current)==null||e.updatePosition(),(i=C.current)==null||i.updatePosition()):N==="left"?(t=B.current)==null||t.updatePosition():N==="right"&&((l=C.current)==null||l.updatePosition())},[O,N,r]);const G=!o.isNull(F)||!o.isNull(r);K(V,"touchmove",e=>{o.isNull(F)||(e.preventDefault(),q({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})),o.isNull(r)||(e.preventDefault(),L({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}))},{passive:!1},!G),K(V,"mousemove",e=>{o.isNull(F)||(e.preventDefault(),q({clientX:e.clientX,clientY:e.clientY})),o.isNull(r)||(e.preventDefault(),L({clientX:e.clientX,clientY:e.clientY}))},{},!G),K(V,"mouseup",()=>{I(null),U(null)},{},!G);const he=(()=>{const e=[],i=(t,l=null)=>{let n=t/(c-a)*100;k&&(n=100-n),e.push(g.createElement("div",{...j(Y("slider__mark",{"slider__mark--hidden":t===a||t===c}),{style:{left:h?void 0:`${n}%`,bottom:h?`${n}%`:void 0}}),key:t},l&&g.createElement("div",{...Y("slider__mark-label",{"slider__mark-label.is-active":p?t<=Math.max(v,M)&&t>=Math.min(v,M):t<=v}),key:t},l)))};if(o.isArray(X))X.forEach(t=>{const l=o.isNumber(t)?t:t.value;i(l,o.isNumber(t)?null:t.label)});else if(o.isNumber(X))for(let t=0;t<(c-a)/X;t++){const l=t*X;i(l)}return e})(),te=e=>{const i=e?0:1,t=e?v:M;return S.jsx(xe,{ref:l=>{const n=e?B:C;return n.current=l,()=>{n.current=null}},visible:e?ae:de,title:W?W(t):t,placement:h?"right":"top",onVisibleChange:l=>{ue(l?e?"left":"right":null)},children:l=>S.jsx("div",{...j(Y("slider__input-wrapper"),{style:{left:h?void 0:`calc(${t} / ${c-a} * 100% - 7px)`,bottom:h?`calc(${t} / ${c-a} * 100% - 7px)`:void 0}}),ref:n=>{const s=e?E:T;return s.current=n,()=>{s.current=null}},...l,children:S.jsx("input",{...b==null?void 0:b[i],...Y("slider__input"),...m==null?void 0:m.inputAria,type:"range",value:t,max:c,min:a,step:x??void 0,disabled:P,"aria-orientation":h?"vertical":"horizontal",onChange:n=>{const s=o.toNumber(n.currentTarget.value);if(p){const u=e?0:1;w(f=>{const y=s-f[u],H=y>0;if(f[u]=s,o.isNumber(_)&&f[1]-f[0]<_){const J=e?1:0;f[J]=$(f[J]+y,H?"ceil":"floor"),f[1]-f[0]<_&&(f[u]=$(f[J]+(H?-_:_),H?"floor":"ceil"))}})}else w(s)},onFocus:n=>{var s,u;(u=(s=b==null?void 0:b[i])==null?void 0:s.onFocus)==null||u.call(s,n),Z(e?"left":"right")},onBlur:n=>{var s,u;(u=(s=b==null?void 0:b[i])==null?void 0:s.onBlur)==null||u.call(s,n),Z(null)}})})})},le=e=>{e.button===0&&e.preventDefault()},fe=Me({form:m});return S.jsxs("div",{...d,...j(Y("slider",`slider--${h?"vertical":"horizontal"}`,{"slider.is-disabled":P}),{className:d.className,style:d.style}),...fe,ref:e=>(D.current=e,()=>{D.current=null}),onMouseDown:e=>{var i;(i=d.onMouseDown)==null||i.call(d,e),le(e),e.button===0&&ee(e)},onMouseUp:e=>{var i;(i=d.onMouseUp)==null||i.call(d,e),le(e)},onTouchStart:e=>{var i;(i=d.onTouchStart)==null||i.call(d,e),ee({clientX:e.touches[0].clientX,clientY:e.touches[0].clientY})},onTouchEnd:e=>{var i;(i=d.onTouchEnd)==null||i.call(d,e),I(null),U(null)},children:[S.jsxs("div",{...Y("slider__track",{"slider__track--reverse":k}),children:[S.jsx("div",{...j(Y("slider__thumb",{"slider__thumb.is-focused":r,"slider__thumb--draggable":Q}),{style:h?{bottom:`calc(${Math.min(v,M)} / ${c-a} * 100%)`,top:`calc(${c-Math.max(v,M)} / ${c-a} * 100%)`}:{left:`calc(${Math.min(v,M)} / ${c-a} * 100%)`,right:`calc(${c-Math.max(v,M)} / ${c-a} * 100%)`}})}),te(!0),p&&te(!1)]}),he]})}export{Ye as S};
