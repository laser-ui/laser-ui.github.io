var p=Object.defineProperty;var b=(n,e,t)=>e in n?p(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var r=(n,e,t)=>(b(n,typeof e!="symbol"?e+"":e,t),t);const E={tree:"^tree","tree.is-disabled":"is-disabled","tree--line":"^tree--line",tree__group:"^tree__group","tree__group--root":"^tree__group--root",tree__option:"^tree__option","tree__option.is-selected":"is-selected","tree__option.is-disabled":"is-disabled","tree__option--root":"^tree__option--root","tree__option--first":"^tree__option--first","tree__option-dot":"^tree__option-dot","tree__option-icon":"^tree__option-icon","tree__option-arrow":"^tree__option-arrow","tree__option-arrow.is-expand":"is-expand","tree__option-checkbox":"^tree__option-checkbox","tree__option-content":"^tree__option-content",tree__empty:"^tree__empty"},f=Symbol(),[o,d,h]=["INDETERMINATE","CHECKED","UNCHECKED"];class l{constructor(e){r(this,"_parent",null);this.origin=e}get parent(){return this._parent}get root(){let e=this;for(;e.parent;)e=e.parent;return e}get isLeaf(){return!this.children}get id(){return this._id}get status(){return this._status}get checked(){return this._status===d}get unchecked(){return this._status===h}get indeterminate(){return this._status===o}get disabled(){return this._disabled}get enabled(){return!this._disabled}updateStatus(e,t=!1){this.children&&!t&&this.children.forEach(s=>{s.updateStatus(e,t)}),this._calculateStatus(e)}_setParent(e){this._parent=e}_updateAncestors(e,t){this._parent&&!t&&this._parent.updateStatus(e,t)}}class c extends l{constructor(t,s,i){super(t);r(this,"children");r(this,"_id");r(this,"_status");r(this,"_disabled");this.getId=s,this.opts=i,this._id=s(t),this._disabled=!!(i.disabled||t.disabled),this._setUpChildren()}changeStatus(t,s){return this._changeStatus(t,s)}_calculateStatus(t){if(this.children){let s=0,i=!1,a=0;for(const _ of this.children)_.enabled&&(a+=1),_.checked?s+=1:_.enabled&&_.indeterminate&&(i=!0);this._status=i?o:s===0?h:s===a?d:o}else this._status=t.has(this._id)?d:h}_changeStatus(t,s){let i=new Set(s);return this.enabled&&this._status!==t&&(this._status=t,this.children?this.children.forEach(a=>{i=a._changeStatus(t,i)}):t===d?i.add(this._id):i.delete(this._id)),i}_setUpChildren(){this.origin.children&&(this.children=this.origin.children.map(t=>{const s=new c(t,this.getId,Object.assign(this.opts,{disabled:this._disabled}));return s._setParent(this),s}))}}class u extends l{constructor(t,s,i){super(t);r(this,"children");r(this,"_id");r(this,"_status");r(this,"_disabled");this.getId=s,this.opts=i,this._id=s(t),this._disabled=!!(i.disabled||t.disabled),this._setUpChildren()}_setUpChildren(){this.origin.children&&(this.children=this.origin.children.map(t=>{const s=new u(t,this.getId,Object.assign(this.opts,{disabled:this._disabled}));return s._setParent(this),s}))}_calculateStatus(t){this._status=this.id===t?d:h}}export{E as C,c as M,u as S,f as T};
