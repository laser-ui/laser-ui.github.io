import{u as V,b as Z,P as se,c as T,j as o,m as H,r as s,B as J,I as ge,a2 as me,a as he,d as _e,f as te,_ as xe,l as U,g as ye,ar as be,a7 as Pe,as as je,a4 as Ee,n as Ie,aq as $e}from"./index-69d16a75.js";const Q={popover:"^popover","popover--top":"^popover--top","popover--top-left":"^popover--top-left","popover--top-right":"^popover--top-right","popover--right":"^popover--right","popover--right-top":"^popover--right-top","popover--right-bottom":"^popover--right-bottom","popover--bottom":"^popover--bottom","popover--bottom-left":"^popover--bottom-left","popover--bottom-right":"^popover--bottom-right","popover--left":"^popover--left","popover--left-top":"^popover--left-top","popover--left-bottom":"^popover--left-bottom",popover__mask:"^popover__mask",popover__content:"^popover__content",popover__arrow:"^popover__arrow",popover__header:"^popover__header","popover__header-title":"^popover__header-title","popover__header-actions":"^popover__header-actions",popover__body:"^popover__body",popover__footer:"^popover__footer","popover__footer--left":"^popover__footer--left","popover__footer--center":"^popover__footer--center","popover__footer--right":"^popover__footer--right"},G={enter:86,leave:100};function Re(k){const{styleOverrides:L,styleProvider:i,align:S="right",actions:h=["cancel","ok"],cancelProps:l,okProps:t,onCancelClick:u,onOkClick:n,_onClose:r,...v}=V("PopoverFooter",k),b=Z(Q,{popover:i==null?void 0:i.popover},L),{t:P}=se(),[j,c]=T(!1,l==null?void 0:l.loading),[d,E]=T(!1,t==null?void 0:t.loading),w={...l,loading:j,onClick:()=>{const e=u==null?void 0:u();e instanceof Promise?(c(!0),e.then(F=>{c(!1),F!==!1&&(r==null||r())})):e!==!1&&(r==null||r())}},C={...t,loading:d,onClick:()=>{const e=n==null?void 0:n();e instanceof Promise?(E(!0),e.then(F=>{E(!1),F!==!1&&(r==null||r())})):e!==!1&&(r==null||r())}};return o.jsx("div",{...v,...H(b("popover__footer",`popover__footer--${S}`),{className:v.className,style:v.style}),children:s.Children.map(h,e=>e==="cancel"?o.jsx(J,{...w,pattern:w.pattern??"secondary",children:w.children??P("Footer","Cancel")}):e==="ok"?o.jsx(J,{...C,children:C.children??P("Footer","OK")}):e)})}function ne(k){const{styleOverrides:L,styleProvider:i,children:S,actions:h=[],closeProps:l,onCloseClick:t,_id:u,_onClose:n,...r}=V("PopoverHeader",k),v=Z(Q,{popover:i==null?void 0:i.popover},L),{t:b}=se(),[P,j]=T(!1,l==null?void 0:l.loading),c={...l,loading:P,onClick:()=>{const d=t==null?void 0:t();d instanceof Promise?(j(!0),d.then(E=>{j(!1),E!==!1&&(n==null||n())})):d!==!1&&(n==null||n())}};return o.jsxs("div",{...r,...H(v("popover__header"),{className:r.className,style:r.style}),children:[o.jsx("div",{...v("popover__header-title"),id:u,children:S}),o.jsx("div",{...v("popover__header-actions"),children:s.Children.map(h,d=>d==="close"?o.jsx(J,{...c,"aria-label":c["aria-label"]??b("Close"),pattern:c.pattern??"text",icon:c.icon??o.jsx(ge,{children:o.jsx(me,{})})}):d)})]})}function ke(k,L){const{children:i,styleOverrides:S,styleProvider:h,content:l,header:t,footer:u,visible:n,defaultVisible:r,trigger:v="hover",placement:b="top",placementFixed:P=!1,arrow:j=!0,escClosable:c=!0,gap:d=10,inWindow:E=!1,mouseEnterDelay:w=150,mouseLeaveDelay:C=200,modal:e=!1,skipFirstTransition:F=!0,destroyAfterClose:ae=!0,zIndex:X,scrolling:ie,onVisibleChange:le,afterVisibleChange:I,..._}=V("Popover",k),ce=e?"click":v,g=he(),N=Z(Q,{popover:h==null?void 0:h.popover},S),O=_e(),z=s.useId();let B;const Y=`${g}-popover-title-${z}`,ee=`${g}-popover-content-${z}`,W=te(()=>document.getElementById(B)),$=s.useRef(null),x=s.useRef(null),de=te(ie),q=s.useRef({prevActiveEl:null}),[y,R]=T(r??!1,n,le),ve=xe(y),fe=U.isUndefined(X)?`calc(var(--${g}-zindex-fixed) + ${ve})`:X,M=s.useRef(),A=s.useRef(b),K=ye(()=>{if(y&&W.current&&$.current&&x.current){const m=be(W.current,{width:x.current.offsetWidth,height:x.current.offsetHeight},{placement:b,placementFallback:A.current,placementFixed:P,gap:d,inWindow:E});M.current=m.transformOrigin,$.current.classList.toggle(`${g}-popover--${A.current}`,!1),A.current=m.placement,$.current.classList.toggle(`${g}-popover--${A.current}`,!0),O.classes.position&&x.current.classList.toggle(O.classes.position,!1),O.replaceRule("position",{top:m.top,left:m.left}),x.current.classList.toggle(O.classes.position,!0)}});Pe(e&&y),s.useImperativeHandle(L,()=>({updatePosition:K}),[K]);const oe=(()=>{if(t){const m=U.isString(t)?o.jsx(ne,{children:t}):t;return s.cloneElement(m,{_id:Y,_onClose:()=>{R(!1)}})}})();return o.jsx(je,{visible:y,trigger:ce,mouseEnterDelay:w,mouseLeaveDelay:C,updatePosition:{fn:K,triggerRef:W,popupRef:x,containerRefs:[de]},onVisibleChange:R,children:({renderTrigger:m,renderPopup:ue})=>{const re=p=>(B=p.props.id??`${g}-popover-trigger-${z}`,m(s.cloneElement(p,{id:B,onKeyDown:f=>{var a,D;(D=(a=p.props).onKeyDown)==null||D.call(a,f),y&&c&&f.code==="Escape"&&(f.stopPropagation(),f.preventDefault(),R(!1))}})));return o.jsxs(o.Fragment,{children:[U.isFunction(i)?i(re):re(i),o.jsx(Ee,{selector:()=>{let p=document.getElementById(`${g}-popover-root`);return p||(p=document.createElement("div"),p.id=`${g}-popover-root`,document.body.appendChild(p)),p},children:o.jsx(Ie,{enter:y,during:G,skipFirstTransition:F,destroyWhenLeaved:ae,afterRender:K,afterEnter:()=>{I==null||I(!0),e&&(q.current.prevActiveEl=document.activeElement,$.current&&$.current.focus({preventScroll:!0}))},afterLeave:()=>{I==null||I(!1),e&&q.current.prevActiveEl&&q.current.prevActiveEl.focus({preventScroll:!0})},children:p=>{let f={};switch(p){case"enter":f={transform:"scale(0.3)",opacity:0};break;case"entering":f={transition:["transform","opacity"].map(a=>`${a} ${G.enter}ms ease-out`).join(", "),transformOrigin:M.current};break;case"leaving":f={transform:"scale(0.3)",opacity:0,transition:["transform","opacity"].map(a=>`${a} ${G.leave}ms ease-in`).join(", "),transformOrigin:M.current};break}return o.jsxs("div",{..._,...H(N("popover"),{className:_.className,style:{..._.style,zIndex:fe,display:p==="leaved"?"none":void 0}}),ref:$,tabIndex:-1,role:_.role??e?"alertdialog":"dialog","aria-modal":e,"aria-labelledby":oe?Y:void 0,"aria-describedby":ee,onKeyDown:a=>{var D;(D=_.onKeyDown)==null||D.call(_,a),y&&c&&a.code==="Escape"&&(a.stopPropagation(),a.preventDefault(),R(!1)),e&&$e(a)},children:[e&&o.jsx("div",{...N("popover__mask"),onClick:()=>{R(!1)}}),ue(o.jsxs("div",{ref:x,...H(N("popover__content"),{style:f}),children:[j&&o.jsx("div",{...N("popover__arrow")}),oe,o.jsx("div",{...N("popover__body"),id:ee,children:l}),u&&s.cloneElement(u,{_onClose:()=>{R(!1)}})]}))]})}})})]})}})}const pe=s.forwardRef(ke);pe.Header=ne;pe.Footer=Re;export{pe as P};
