import{P as ce,r as _,l as te,j as s,a9 as fe,I as T,q as ue,u as he,a as _e,b as pe,c as z,R as me,a3 as xe,m as ge,B as Y,X as Se}from"./index-a7d7e0e1.js";import{S as be}from"./keyboard_arrow_left-7653738e.js";import{S as je}from"./search-c2445d99.js";import{C as Z}from"./Checkbox-931579e0.js";import{I as ve}from"./Input-b972893a.js";import{V as Ce}from"./VirtualScroll-9695b948.js";import{E as ee}from"./Empty-224174a2.js";const ye={transfer:"^transfer","transfer.is-disabled":"is-disabled",transfer__panel:"^transfer__panel",transfer__actions:"^transfer__actions",transfer__header:"^transfer__header","transfer__header-title":"^transfer__header-title",transfer__search:"^transfer__search","transfer__list-container":"^transfer__list-container",transfer__list:"^transfer__list",transfer__loading:"^transfer__loading",transfer__option:"^transfer__option","transfer__option.is-disabled":"is-disabled","transfer__option-prefix":"^transfer__option-prefix","transfer__option-content":"^transfer__option-content"},x=Symbol();function se(N){const{namespace:B,styled:l,list:i,selectedCount:j,state:y,title:E,loading:D,searchable:F,virtual:p,customItem:I,onSelectedChange:v,onAllSelectedChange:f,onSearch:P,onScrollBottom:K}=N,{t:w}=ce(),M=_.useRef(null),c=_.useId(),A=t=>`${B}-transfer-item-${t}-${c}`,C=_.useCallback(t=>!t.disabled,[]),L=_.useMemo(()=>({list:i,itemKey:t=>t.value,itemSize:te.isNumber(p)?p:32,itemFocusable:C}),[C,i,p]);return s.jsxs("div",{...l("transfer__panel"),children:[s.jsxs("div",{...l("transfer__header"),children:[s.jsxs(Z,{model:y===!0,indeterminate:y==="mixed",disabled:i.length===0,onModelChange:t=>{f(t)},children:[j,"/",i.length]}),fe(E)&&s.jsx("div",{...l("transfer__header-title"),children:E})]}),F&&s.jsx("div",{...l("transfer__search"),children:s.jsx(ve,{style:{display:"flex"},placeholder:w("Search"),prefix:s.jsx(T,{children:s.jsx(je,{})}),clearable:!0,onModelChange:P})}),s.jsxs("div",{...l("transfer__list-container"),children:[D&&s.jsx("div",{...l("transfer__loading"),children:s.jsx(T,{children:s.jsx(ue,{})})}),s.jsx(Ce,{...L,ref:M,enable:p!==!1,listSize:192,listPadding:0,itemRender:(t,g,R)=>{const{label:m,value:S,disabled:b}=t;return _.createElement("li",{...l("transfer__option",{"transfer__option.is-disabled":b}),...R,key:S,id:A(S),title:m,onClick:()=>{b||v==null||v(S)}},s.jsx("div",{...l("transfer__option-prefix"),children:s.jsx(Z,{model:t[x],disabled:b})}),s.jsx("div",{...l("transfer__option-content"),children:I?I(t):m}))},placeholder:"li",onScrollEnd:K,children:(t,g)=>s.jsx("ul",{...l("transfer__list"),onScroll:g,children:i.length===0?s.jsx(ee,{style:{marginTop:32},image:ee.SIMPLE_IMG}):t})})]})]})}function Ve(N){const{styleOverrides:B,styleProvider:l,formControl:i,list:j,model:y,defaultModel:E,selected:D,defaultSelected:F,searchable:p=!1,searchValue:I,defaultSearchValue:v,title:f,loading:P=[!1,!1],disabled:K=!1,virtual:w=!1,customItem:M,customSearch:c,onModelChange:A,onSelectedChange:C,onSearch:L,onScrollBottom:t,...g}=he("Transfer",N),R=_e(),m=pe(ye,{transfer:l==null?void 0:l.transfer},B),S=_.useMemo(()=>new Map(j.map(e=>[e.value,e])),[j]),[b,ae]=z(E??[],y,e=>{A&&A(e,e.map(a=>S.get(a)))},void 0,i==null?void 0:i.control),ne=_.useMemo(()=>new Set(b),[b]),[O,$]=z(F??[],D,e=>{C&&C(e,e.map(a=>S.get(a)))}),re=_.useMemo(()=>new Set(O),[O]),[q,G]=z(v??["",""],I,L),{disabled:le}=me({disabled:K||(i==null?void 0:i.control.disabled)}),[u,U,V]=(()=>{const e=[[],[]],a=[0,0],o=[!0,!0],n=[!0,!0],h=[!1,!1],ie=te.isUndefined(c==null?void 0:c.filter)?(r,d)=>r.label.includes(d):(r,d)=>c.filter(d,r),k=c==null?void 0:c.sort;j.forEach(r=>{const d=ne.has(r.value)?1:0,Q=Object.assign({[x]:!1},r),W=q[d];(!W||ie(r,W))&&(re.has(r.value)?(Q[x]=!0,a[d]+=1,r.disabled||(h[d]=!0)):r.disabled||(n[d]=!1),e[d].push(Q),r.disabled||(o[d]=!1))}),q[0]&&k&&e[0].sort(k),q[1]&&k&&e[1].sort(k);const de=[0,1].map(r=>o[r]?!1:n[r]?!0:h[r]?"mixed":!1);return[e,a,de]})(),X=e=>{$(a=>{const o=a.findIndex(n=>n===e);o!==-1?a.splice(o,1):a.push(e)})},H=(e,a)=>{$(o=>{const n=new Set(o);for(const h of a?u[0]:u[1])h.disabled||(e&&!h[x]?n.add(h.value):!e&&h[x]&&n.delete(h.value));return Array.from(n)})},J=e=>{ae(a=>{const o=new Set(a);return(e?u[0]:u[1]).forEach(n=>{n[x]&&(e?o.add(n.value):o.delete(n.value))}),Array.from(o)}),$(a=>{const o=new Set(a);return(e?u[0]:u[1]).forEach(n=>{n[x]&&o.delete(n.value)}),Array.from(o)})},oe=xe({form:i});return s.jsxs("div",{...g,...ge(m("transfer",{"transfer.is-disabled":le}),{className:g.className,style:g.style}),...oe,children:[s.jsx(se,{namespace:R,styled:m,list:u[0],selectedCount:U[0],state:V[0],title:f==null?void 0:f[0],loading:P[0]??!1,searchable:p,virtual:w,customItem:M,onSelectedChange:X,onAllSelectedChange:e=>{H(e,!0)},onSearch:e=>{G(a=>{a[0]=e})},onScrollBottom:()=>{t==null||t("left")}}),s.jsxs("div",{...m("transfer__actions"),children:[s.jsx(Y,{disabled:V[0]===!1,pattern:"secondary",icon:s.jsx(T,{children:s.jsx(Se,{})}),onClick:()=>{J(!0)}}),s.jsx(Y,{disabled:V[1]===!1,pattern:"secondary",icon:s.jsx(T,{children:s.jsx(be,{})}),onClick:()=>{J(!1)}})]}),s.jsx(se,{namespace:R,styled:m,list:u[1],selectedCount:U[1],state:V[1],title:f==null?void 0:f[1],loading:P[1]??!1,searchable:p,virtual:w,customItem:M,onSelectedChange:X,onAllSelectedChange:e=>{H(e,!1)},onSearch:e=>{G(a=>{a[1]=e})},onScrollBottom:()=>{t==null||t("right")}})]})}export{Ve as T};
