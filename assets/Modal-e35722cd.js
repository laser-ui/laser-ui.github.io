import{r as v,u as M,b as P,j as e,m as L,V as T,I as W,v as q,c as F,l as y,B as H,K as J,a as X,H as Y,Q as V,P as ee,k as oe,T as te,R as p,L as ae,aa as le,U as re}from"./index-0bc3a1b4.js";import{S as se}from"./check_circle-877d8b1d.js";import{S as ne}from"./highlight_off-f3c3bddf.js";import{S as de}from"./info-3064f332.js";import{a as ie}from"./Route-3dbf4d1c.js";const z={modal:"^modal","modal--center":"^modal--center","modal--alert":"^modal--alert",modal__content:"^modal__content",modal__header:"^modal__header","modal__header-title":"^modal__header-title","modal__header-actions":"^modal__header-actions",modal__body:"^modal__body",modal__footer:"^modal__footer","modal__footer--left":"^modal__footer--left","modal__footer--center":"^modal__footer--center","modal__footer--right":"^modal__footer--right",modal__alert:"^modal__alert","modal__alert--success":"^modal__alert--success","modal__alert--warning":"^modal__alert--warning","modal__alert--error":"^modal__alert--error","modal__alert--info":"^modal__alert--info","modal__alert-icon":"^modal__alert-icon","modal__alert-content":"^modal__alert-content","modal__alert-title":"^modal__alert-title","modal__alert-message":"^modal__alert-message"},R=v.createContext(void 0);function ce(E){const{styleOverrides:k,styleProvider:m,children:x,type:d,title:a,icon:_,...i}=M("ModalAlert",E),n=P(z,{modal:m==null?void 0:m.modal},k);return e.jsxs("div",{...i,...L(n("modal__alert",`modal__alert--${d}`),{className:i.className,style:i.style}),children:[e.jsx("div",{...n("modal__alert-icon"),children:T(_)?_:e.jsx(W,{children:d==="success"?e.jsx(se,{}):d==="warning"?e.jsx(ie,{}):d==="error"?e.jsx(ne,{}):e.jsx(de,{})})}),e.jsxs("div",{...n("modal__alert-content"),children:[T(a)&&e.jsx("div",{...n("modal__alert-title"),children:a}),T(x)&&e.jsx("div",{...n("modal__alert-message"),children:x})]})]})}function me(E){const{styleOverrides:k,styleProvider:m,align:x="right",actions:d=["cancel","ok"],cancelProps:a,okProps:_,onCancelClick:i,onOkClick:n,...t}=M("ModalFooter",E),f=P(z,{modal:m==null?void 0:m.modal},k),{t:N}=q(),l=v.use(R),[j,u]=F(!1,a==null?void 0:a.loading),[b,w]=F(!1,_==null?void 0:_.loading),r={...a,loading:j,onClick:()=>{const o=i==null?void 0:i();o instanceof Promise?(u(!0),o.then(h=>{u(!1),h!==!1&&(l==null||l.onClose())})):o!==!1&&(l==null||l.onClose())}},g={..._,loading:b,onClick:()=>{const o=n==null?void 0:n();o instanceof Promise?(w(!0),o.then(h=>{w(!1),h!==!1&&(l==null||l.onClose())})):o!==!1&&(l==null||l.onClose())}};return e.jsx("div",{...t,...L(f("modal__footer",`modal__footer--${x}`),{className:t.className,style:t.style}),children:d.map((o,h)=>{const{id:A,action:$}=y.has(o,["id","action"])?o:{id:h,action:o};return e.jsx(v.Fragment,{children:$==="cancel"?e.jsx(H,{...r,pattern:r.pattern??"secondary",children:r.children??N("Footer","Cancel")}):$==="ok"?e.jsx(H,{...g,children:g.children??N("Footer","OK")}):$},A)})})}function G(E){const{styleOverrides:k,styleProvider:m,children:x,actions:d=["close"],closeProps:a,onCloseClick:_,...i}=M("ModalHeader",E),n=P(z,{modal:m==null?void 0:m.modal},k),{t}=q(),f=v.use(R),[N,l]=F(!1,a==null?void 0:a.loading),j={...a,loading:N,onClick:()=>{const u=_==null?void 0:_();u instanceof Promise?(l(!0),u.then(b=>{l(!1),b!==!1&&(f==null||f.onClose())})):u!==!1&&(f==null||f.onClose())}};return e.jsxs("div",{...i,...L(n("modal__header"),{className:i.className,style:i.style}),children:[e.jsx("div",{...n("modal__header-title"),id:f==null?void 0:f.id,children:x}),e.jsx("div",{...n("modal__header-actions"),children:d.map((u,b)=>{const{id:w,action:r}=y.has(u,["id","action"])?u:{id:b,action:u};return e.jsx(v.Fragment,{children:r==="close"?e.jsx(H,{...j,"aria-label":j["aria-label"]??t("Close"),pattern:j.pattern??"text",icon:j.icon??e.jsx(W,{children:e.jsx(J,{})})}):r},w)})})]})}const C=E=>{const{children:k,styleOverrides:m,styleProvider:x,visible:d,header:a,footer:_,alert:i,width:n=520,top:t=100,mask:f=!0,maskClosable:N=!0,escClosable:l=!0,skipFirstTransition:j=!0,destroyAfterClose:u=!1,lazyLoading:b=!0,zIndex:w,onClose:r,afterVisibleChange:g,...o}=M("Modal",E),h=X(),A=P(z,{modal:x==null?void 0:x.modal},m),$=v.useRef(null),S=v.useRef(null),O=v.useRef(null),D=v.useId(),B=`${h}-modal-title-${D}`,K=`${h}-modal-content-${D}`,Q=Y(d),Z=y.isUndefined(w)?`calc(var(--${h}-zindex-fixed) + ${Q})`:w;return V(d),e.jsx(ee,{selector:()=>{let s=document.getElementById(`${h}-modal-root`);return s||(s=document.createElement("div"),s.id=`${h}-modal-root`,document.body.appendChild(s)),s},children:e.jsx(oe,{enter:d,name:`${h}-modal`,duration:te,skipFirstTransition:j,onSkipEnter:s=>{if(s){if(y.isUndefined(p.clickEvent)||performance.now()-p.clickEvent.time>100)s.style.setProperty("--modal-transform-origin","unset");else if(S.current){const I=`${(p.windowSize.width-S.current.offsetWidth)/2}px`,c=t==="center"?`${(p.windowSize.height-S.current.offsetHeight)/2}px`:`${t}${y.isNumber(t)?"px":""}`;s.style.setProperty("--modal-transform-origin",`calc(${p.clickEvent.x}px - ${I}) calc(${p.clickEvent.y}px - ${c})`)}}},onBeforeEnter:s=>{if(s){if(y.isUndefined(p.clickEvent)||performance.now()-p.clickEvent.time>100)s.style.setProperty("--modal-transform-origin","unset");else if(S.current){const I=`${(p.windowSize.width-S.current.offsetWidth)/2}px`,c=t==="center"?`${(p.windowSize.height-S.current.offsetHeight)/2}px`:`${t}${y.isNumber(t)?"px":""}`;s.style.setProperty("--modal-transform-origin",`calc(${p.clickEvent.x}px - ${I}) calc(${p.clickEvent.y}px - ${c})`)}}},onAfterEnter:()=>{g==null||g(!0),O.current=document.activeElement,$.current&&$.current.focus({preventScroll:!0})},onAfterLeave:()=>{g==null||g(!1),O.current&&O.current.focus({preventScroll:!0})},children:(s,I)=>e.jsx(ae,{hidden:I,disabled:!b,children:I&&u?null:e.jsx(R,{value:{id:B,onClose:()=>{r==null||r()}},children:e.jsxs("div",{...o,...L(A("modal",{"modal--center":t==="center","modal--alert":i}),{className:o.className,style:{...o.style,zIndex:Z,...I?{display:"none"}:void 0}}),ref:c=>($.current=c,()=>{$.current=null}),tabIndex:o.tabIndex??-1,role:"dialog","aria-modal":!0,"aria-labelledby":a?B:void 0,"aria-describedby":K,onKeyDown:c=>{var U;(U=o.onKeyDown)==null||U.call(o,c),d&&l&&c.code==="Escape"&&(c.stopPropagation(),c.preventDefault(),r==null||r()),le(c)},children:[f&&e.jsx(re,{visible:d,onClose:()=>{N&&(r==null||r())}}),e.jsxs("div",{...L(A("modal__content"),{style:{width:n,top:t==="center"?void 0:t,maxHeight:t==="center"?void 0:`calc(100% - ${t}${y.isNumber(t)?"px":""} - 20px)`}}),ref:c=>(S.current=c,s(c),()=>{S.current=null,s(null)}),children:[y.isString(a)?e.jsx(G,{children:a}):a,e.jsx("div",{...A("modal__body"),id:K,children:i??k}),_]})]})})})})})};C.Header=G;C.Footer=me;C.Alert=ce;export{C as M};
