import{u as U,b as Z,N as re,c as O,j as o,m as A,r,B as M,I as _e,a1 as ye,a as xe,e as te,Z as be,l as W,f as Pe,aq as je,a6 as Ee,ar as Ie,a3 as Se,n as ke,ap as $e}from"./index-3d5234e2.js";const G={popover:"^popover","popover--top":"^popover--top","popover--top-left":"^popover--top-left","popover--top-right":"^popover--top-right","popover--right":"^popover--right","popover--right-top":"^popover--right-top","popover--right-bottom":"^popover--right-bottom","popover--bottom":"^popover--bottom","popover--bottom-left":"^popover--bottom-left","popover--bottom-right":"^popover--bottom-right","popover--left":"^popover--left","popover--left-top":"^popover--left-top","popover--left-bottom":"^popover--left-bottom",popover__mask:"^popover__mask",popover__content:"^popover__content",popover__arrow:"^popover__arrow",popover__header:"^popover__header","popover__header-title":"^popover__header-title","popover__header-actions":"^popover__header-actions",popover__body:"^popover__body",popover__footer:"^popover__footer","popover__footer--left":"^popover__footer--left","popover__footer--center":"^popover__footer--center","popover__footer--right":"^popover__footer--right"},q={enter:86,leave:100};function we(S){const{styleOverrides:k,styleProvider:i,align:$="right",actions:h=["cancel","ok"],cancelProps:l,okProps:n,onCancelClick:u,onOkClick:s,_onClose:t,...v}=U("PopoverFooter",S),y=Z(G,{popover:i==null?void 0:i.popover},k),{t:x}=re(),[b,c]=O(!1,l==null?void 0:l.loading),[d,P]=O(!1,n==null?void 0:n.loading),w={...l,loading:b,onClick:()=>{const e=u==null?void 0:u();e instanceof Promise?(c(!0),e.then(R=>{c(!1),R!==!1&&(t==null||t())})):e!==!1&&(t==null||t())}},D={...n,loading:d,onClick:()=>{const e=s==null?void 0:s();e instanceof Promise?(P(!0),e.then(R=>{P(!1),R!==!1&&(t==null||t())})):e!==!1&&(t==null||t())}};return o.jsx("div",{...v,...A(y("popover__footer",`popover__footer--${$}`),{className:v.className,style:v.style}),children:r.Children.map(h,e=>e==="cancel"?o.jsx(M,{...w,pattern:w.pattern??"secondary",children:w.children??x("Footer","Cancel")}):e==="ok"?o.jsx(M,{...D,children:D.children??x("Footer","OK")}):e)})}function ne(S){const{styleOverrides:k,styleProvider:i,children:$,actions:h=[],closeProps:l,onCloseClick:n,_id:u,_onClose:s,...t}=U("PopoverHeader",S),v=Z(G,{popover:i==null?void 0:i.popover},k),{t:y}=re(),[x,b]=O(!1,l==null?void 0:l.loading),c={...l,loading:x,onClick:()=>{const d=n==null?void 0:n();d instanceof Promise?(b(!0),d.then(P=>{b(!1),P!==!1&&(s==null||s())})):d!==!1&&(s==null||s())}};return o.jsxs("div",{...t,...A(v("popover__header"),{className:t.className,style:t.style}),children:[o.jsx("div",{...v("popover__header-title"),id:u,children:$}),o.jsx("div",{...v("popover__header-actions"),children:r.Children.map(h,d=>d==="close"?o.jsx(M,{...c,"aria-label":c["aria-label"]??y("Close"),pattern:c.pattern??"text",icon:c.icon??o.jsx(_e,{children:o.jsx(ye,{})})}):d)})]})}function Re(S,k){const{children:i,styleOverrides:$,styleProvider:h,content:l,header:n,footer:u,visible:s,defaultVisible:t,trigger:v="hover",placement:y="top",placementFixed:x=!1,arrow:b=!0,escClosable:c=!0,gap:d=10,inWindow:P=!1,mouseEnterDelay:w=150,mouseLeaveDelay:D=200,modal:e=!1,skipFirstTransition:R=!0,destroyAfterClose:pe=!0,zIndex:V,scrolling:ae,onVisibleChange:ie,afterVisibleChange:j,...g}=U("Popover",S),le=e?"click":v,E=xe(),N=Z(G,{popover:h==null?void 0:h.popover},$),T=r.useId();let K;const J=`${E}-popover-title-${T}`,Q=`${E}-popover-content-${T}`,H=te(()=>document.getElementById(K)),z=r.useRef(null),F=r.useRef(null),ce=te(ae),B=r.useRef({prevActiveEl:null}),[_,I]=O(t??!1,s,ie),de=be(_),ve=W.isUndefined(V)?`calc(var(--${E}-zindex-fixed) + ${de})`:V,[fe,ue]=r.useState({top:"-200vh",left:"-200vw"}),[X,me]=r.useState(),[Y,he]=r.useState(y),C=Pe(()=>{if(_&&H.current&&F.current){const m=je(H.current,{width:F.current.offsetWidth,height:F.current.offsetHeight},{placement:y,placementFallback:Y,placementFixed:x,gap:d,inWindow:P});ue({top:m.top,left:m.left}),me(m.transformOrigin),he(m.placement)}});Ee(e&&_),r.useImperativeHandle(k,()=>({updatePosition:C}),[C]);const ee=(()=>{if(n){const m=W.isString(n)?o.jsx(ne,{children:n}):n;return r.cloneElement(m,{_id:J,_onClose:()=>{I(!1)}})}})();return o.jsx(Ie,{visible:_,trigger:le,mouseEnterDelay:w,mouseLeaveDelay:D,updatePosition:{fn:C,triggerRef:H,popupRef:F,containerRefs:[ce]},onVisibleChange:I,children:({renderTrigger:m,renderPopup:ge})=>{const oe=p=>(K=p.props.id??`${E}-popover-trigger-${T}`,m(r.cloneElement(p,{id:K,onKeyDown:f=>{var a,L;(L=(a=p.props).onKeyDown)==null||L.call(a,f),_&&c&&f.code==="Escape"&&(f.stopPropagation(),f.preventDefault(),I(!1))}})));return o.jsxs(o.Fragment,{children:[W.isFunction(i)?i(oe):oe(i),o.jsx(Se,{selector:()=>{let p=document.getElementById(`${E}-popover-root`);return p||(p=document.createElement("div"),p.id=`${E}-popover-root`,document.body.appendChild(p)),p},children:o.jsx(ke,{enter:_,during:q,skipFirstTransition:R,destroyWhenLeaved:pe,afterRender:C,afterEnter:()=>{j==null||j(!0),e&&(B.current.prevActiveEl=document.activeElement,z.current&&z.current.focus({preventScroll:!0}))},afterLeave:()=>{j==null||j(!1),e&&B.current.prevActiveEl&&B.current.prevActiveEl.focus({preventScroll:!0})},children:p=>{let f={};switch(p){case"enter":f={transform:"scale(0.3)",opacity:0};break;case"entering":f={transition:["transform","opacity"].map(a=>`${a} ${q.enter}ms ease-out`).join(", "),transformOrigin:X};break;case"leaving":f={transform:"scale(0.3)",opacity:0,transition:["transform","opacity"].map(a=>`${a} ${q.leave}ms ease-in`).join(", "),transformOrigin:X};break}return o.jsxs("div",{...g,...A(N("popover",`popover--${Y}`),{className:g.className,style:{...g.style,zIndex:ve,display:p==="leaved"?"none":void 0}}),ref:z,tabIndex:-1,role:g.role??e?"alertdialog":"dialog","aria-modal":e,"aria-labelledby":ee?J:void 0,"aria-describedby":Q,onKeyDown:a=>{var L;(L=g.onKeyDown)==null||L.call(g,a),_&&c&&a.code==="Escape"&&(a.stopPropagation(),a.preventDefault(),I(!1)),e&&$e(a)},children:[e&&o.jsx("div",{...N("popover__mask"),onClick:()=>{I(!1)}}),ge(o.jsxs("div",{ref:F,...A(N("popover__content"),{style:{...fe,...f}}),children:[b&&o.jsx("div",{...N("popover__arrow")}),ee,o.jsx("div",{...N("popover__body"),id:Q,children:l}),u&&r.cloneElement(u,{_onClose:()=>{I(!1)}})]}))]})}})})]})}})}const se=r.forwardRef(Re);se.Header=ne;se.Footer=we;export{se as P};
